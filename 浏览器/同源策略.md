## 同源策略

### 同源

```
【定义】： 协议相同、 域名相同、 端口相同 称为同源

【非同源对浏览器操作限制】：  cookie限制

                            DOM限制： 存在iframe子页面，父页面无法操作子页面DOM
                              window.postMessage(data, 'url')   url是接受消息的源      HTML5提出跨窗口通信
                              window.addEventListener('message', function (e) {
                                   console.log(e.data);
                              },false);
                            
                        AJax请求限制： 不能向非同源服务器发送Ajax请求
                        
【Ajax请求限制】： 1. JSONP : 在父页面动态创建<script>标签(document.creatElement('script'))
                           设置<script>标签的src为要访问的非同源服务器在查询字段写入？参数1=value&callback=函数名
                           将该<script>标签加入当前页面，document.body.appendChild(name);
                           服务器收到这个请求以后，会将数据以Json的格式放在回调函数的参数位置返回
     本质：.js文件不受同源策略限制，反是有src这个属性的标签都有跨域功能，服务器把数据装进js的文件中从而完成跨域。因为JSON被JS原生支持，后台同时也支持这种数据格式因此选用JSON这数据格式进行传输。
     
                2.  Websocket
                       1. 不受同源策略限制的协议，因为请求报文中含有Orign字段
                           Origin字段会指明请求源，服务器收到后会对请求源进行判断
                3.  CORS
                
                     1. 报文类型Options  请求字段： Access-control-request-Methods
                                                 Access-control-request-Headers
                                                 Access-control-request-origin : 允许的请求源
                                        响应报文： Access-Control-Allow- origin
                                                 Access-Control-Allow-Methods
                        若服务器否定请求，返回一个正常的报文，不包含CORS字段
                                                 
```

